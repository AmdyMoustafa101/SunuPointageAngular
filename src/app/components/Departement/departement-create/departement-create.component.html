<!-- Bouton pour afficher le formulaire d'ajout -->
<button class="btn btn-outline-primary mb-4" (click)="toggleForm()">
  <i class="fas fa-plus-circle"></i> Ajouter Département
</button>

<!-- Formulaire d'ajout de département -->
<form *ngIf="isFormVisible" [formGroup]="departementForm" (ngSubmit)="onSubmit()" class="card shadow-sm rounded p-4 bg-light">
  <div class="card-header text-center">
    <h3 class="text-primary"><i class="fas fa-building"></i> Créer un Département</h3>
  </div>
  
  <div class="card-body">
    <div class="mb-3">
      <label for="nom" class="form-label">Nom</label>
      <input id="nom" formControlName="nom" required class="form-control" placeholder="Nom du département" />
    </div>

    <div class="mb-3">
      <label for="description" class="form-label">Description</label>
      <textarea id="description" formControlName="description" required rows="4" class="form-control" placeholder="Description du département"></textarea>
    </div>

    <div formArrayName="horaires">
      <div *ngFor="let horaire of horaires.controls; let i = index" [formGroupName]="i" class="mb-4">
        <div formGroupName="jours" class="mb-3">
          <label class="form-label">Jours</label>
          <div class="d-flex flex-wrap">
            <div *ngFor="let jour of jours" class="form-check me-3">
              <input type="checkbox" formControlName="{{ jour }}" class="form-check-input" />
              <label class="form-check-label">{{ jour }}</label>
            </div>
          </div>
        </div>

        <div class="mb-3">
          <label for="heure_debut" class="form-label">Heure début</label>
          <input id="heure_debut" formControlName="heure_debut" type="time" required class="form-control" />
        </div>

        <div class="mb-3">
          <label for="heure_fin" class="form-label">Heure fin</label>
          <input id="heure_fin" formControlName="heure_fin" type="time" required class="form-control" />
        </div>

        <button type="button" class="btn btn-danger btn-sm" (click)="removeHoraire(i)">
          <i class="fas fa-trash-alt"></i> Supprimer
        </button>
      </div>
    </div>

    <div class="mb-4">
      <button type="button" class="btn btn-outline-secondary" (click)="addHoraire()">
        <i class="fas fa-plus"></i> Ajouter un horaire
      </button>
    </div>

    <div class="d-flex justify-content-center">
      <button type="submit" [disabled]="departementForm.invalid" class="btn btn-primary">
        <i class="fas fa-check"></i> Créer le département
      </button>
    </div>
  </div>
</form>

<!-- Liste des départements -->
<div class="container mt-5">
  <h3 class="text-center mb-4 text-primary">Liste des Départements</h3>
  <div class="table-responsive">
    <table class="table table-striped table-bordered w-75 mx-auto">
      <thead class="table-light">
        <tr>
          <th scope="col">Nom</th>
          <th scope="col">Description</th>
          <th scope="col">Horaires</th>
          <th scope="col">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let departement of departements">
          <td>{{ departement.nom }}</td>
          <td>{{ departement.description }}</td>
          <td>
            <ul>
              <li *ngFor="let horaire of departement.horaires">
                {{ horaire.jours.join(', ') }} : {{ horaire.heure_debut }} - {{ horaire.heure_fin }}
              </li>
            </ul>
          </td>
          <td class="text-center">
            <button class="btn btn-warning btn-sm" (click)="editDepartement(departement)">
              <i class="fas fa-edit"></i> Modifier
            </button>
            <button class="btn btn-danger btn-sm" (click)="deleteDepartement(departement.id)">
              <i class="fas fa-trash"></i> Supprimer
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

