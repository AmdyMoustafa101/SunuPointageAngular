<app-header-and-sidebar></app-header-and-sidebar>

<div class="container">
    <div class="main-content">
        <section class="stats">
            <div class="stat-card">
                <h3>Total Cohortes</h3>
                <p>{{ cohortes.length }}</p>
            </div>
            <div class="stat-card">
                <h3>Total Filles</h3>
                <p>280</p>
            </div>
            <div class="stat-card">
                <h3>Total Garçons</h3>
                <p>170</p>
            </div>
        </section>

        <section class="cohortes-list-container">
            <div class="cohortes-header">
                <h2>Toutes les cohortes</h2>
                <a class="btn btn-secondary" id="export-btn" href="#" (click)="exportToCsv()">
                    <i class="fas fa-file-csv"></i> Excel CSV
                </a>
                <div class="cohortes-actions">
                    <input type="text" class="search-input" placeholder="Rechercher par nom..." [(ngModel)]="searchText" />
                    <a class="btn btn-primary" id="add-cohort-btn" [routerLink]="['/cohorte/add']">
                        <i class="fas fa-plus-circle"></i> Nouvelle Cohorte
                    </a>
                </div>
            </div>

            
            <div class="cohortes-list">
                <table>
                    <thead>
                        <tr>
                            <th>Nom de la Cohorte</th>
                            <th>Horaires Début</th>
                            <th>Horaires Fin</th>
                            <th>Année</th>
                            <th>Statut</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Appliquer le filtre sur la liste des cohortes -->
                        <tr *ngFor="let cohorte of filterCohortes()">
                            <td *ngIf="selectAll"><input type="checkbox" [(ngModel)]="cohorte.selected" /></td>
                            <td>{{ cohorte.nom }}</td>
                            <td>{{ cohorte.horaires[0]?.heure_debut || 'Non défini' }}</td>
                            <td>{{ cohorte.horaires[0]?.heure_fin || 'Non défini' }}</td>
                            <td>{{ cohorte.annee }}</td>
                            <td>
                                <span class="status-badge" [ngClass]="{
                                    'status-active': cohorte.statut === statutCohorte.ACTIVE, 
                                    'status-terminee': cohorte.statut === statutCohorte.TERMINEE
                                }">
                                    {{ cohorte.statut === statutCohorte.ACTIVE ? 'En cours' : 'Terminé' }}
                                </span>
                            </td>
                            <td>
                                <button (click)="viewCohorte(cohorte.id)" class="btn btn-info" [routerLink]="['/cohorte', cohorte.id]">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>
    </div>
</div>
